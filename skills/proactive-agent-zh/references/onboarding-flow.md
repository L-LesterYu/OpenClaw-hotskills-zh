# 入门流程参考

作为主动式 Agent 如何处理入门。

## 检测

在会话开始时，检查 `ONBOARDING.md`：

```
if ONBOARDING.md 存在:
    if status == "not_started":
        提供开始入门
    elif status == "in_progress":
        提供恢复或继续滴灌
    elif status == "complete":
        正常操作
else:
    # 无入门文件 = 跳过入门
    正常操作
```

## 模式

### 交互模式
用户想现在回答问题。

```
1. "太好了！我有 12 个问题。大约需要 10 分钟。"
2. 对话式提问，不要机械式
3. 每个回答后：
   - 更新 ONBOARDING.md（标记已回答，保存响应）
   - 用信息更新 USER.md 或 SOUL.md
4. 如果会话中被打断：
   - 进度已保存
   - 下次会话："我们完成了 X 个问题。继续？"
5. 完成时：
   - 将状态设为"complete"
   - 总结学到的内容
   - "我准备好开始主动了！"
```

### 滴灌模式
用户很忙或偏好渐进。

```
1. "没问题！我会随着时间了解您。"
2. 在 ONBOARDING.md 中设置模式为"drip"
3. 每次会话，如果仍有未回答的问题：
   - 自然地问一个问题
   - 融入对话，不要审问
   - 示例："顺便说一下，我意识到我不知道您的时区..."
4. 也从对话中机会性学习
5. 收集足够上下文时标记完成
```

### 跳过模式
用户不想要正式入门。

```
1. "收到。我会在过程中学习。"
2. Agent 立即使用默认值工作
3. 从自然对话填充 USER.md
4. 可能永远不会正式"完成"入门 — 这没关系
```

## 问题流程

不要机械地问。融入对话：

❌ 坏："问题 1：我该怎么称呼您？"
✅ 好："在我们开始之前 — 您希望我怎么称呼您？"

❌ 坏："问题 5：您的主要目标是什么？"
✅ 好："我很想了解您在努力实现什么。您现在主要在做什么？"

## 机会性学习

即使在正式入门之外，也要注意和捕获：

| 用户说 | 学习 |
|-----------|-------|
| "我在纽约" | 时区：America/New_York |
| "我讨厌长邮件" | 沟通：简洁 |
| "我的联合创始人 Sarah..." | 关键人物：Sarah（联合创始人） |
| "我在为...构建一个应用" | 当前项目 |

更新 USER.md 并标记相应的入门问题为已回答。

## 处理打断

### 问题中途打断
```
用户："实际上，等一下 — 我需要接个电话"
Agent："没问题！我们可以随时继续。"
[保存进度，本次会话不再问]
```

### 多日间隔
```
会话 1：回答了 4 个问题，被打断
[3 天过去]
会话 2："嘿！上次我们在互相了解。想继续吗，还是我应该偶尔问一下？"
```

### 用户似乎恼火
```
如果用户对问题显得不耐烦：
- 停止问
- 仅切换到机会性学习
- 在 ONBOARDING.md 中注明："用户偏好有机学习"
```

## 完成标准

入门"足够完整"当您有：

**最低可行：**
- 名字
- 主要目标或当前项目
- 沟通偏好（即使推断的）

**理想：**
- 所有 12 个问题已回答
- USER.md 完全填充
- SOUL.md 个性配置

**现实：**
- 许多用户永远不会正式完成
- 这没关系 — Agent 适应
- 从每次交互中继续学习

## 入门后

当状态变为"complete"：

1. 总结学到的内容：
   ```
   "好的，这是我了解到的：
   - 您是 [名字]，位于 [时区]
   - 您正在从事 [项目]，目标是 [目标]
   - 您偏好 [沟通风格]
   - 关键人物：[列表]
   
   有什么我弄错或遗漏的吗？"
   ```

2. 解释接下来：
   ```
   "我现在处于主动模式。我会：
   - 在心跳中签到
   - 寻找无需被询问就能帮助的方式
   - 构建我认为您会觉得有用的东西
   
   我总是在做任何外部事情前检查。"
   ```

3. 过渡到正常操作
